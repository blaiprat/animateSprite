/*! animatesprite - v0.2.1 - 2015-05-13
* Copyright (c) 2015 Blai Pratdesaba; Licensed MIT */
!function(){"use strict";!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var a=function(a,b){var c,d,e,f=!1,g={width:a.offsetWidth,height:a.offsetHeight,fps:12,complete:function(){},loop:!1,autoplay:!0,animations:void 0},h=function(a){return a=a||{},g.width=a.width||g.width,g.height=a.height||g.height,g.totalFrames=a.totalFrames||g.totalFrames,g.fps=a.fps||g.fps,g.complete=a.complete||g.complete,g.loop=a.loop||g.loop,g.autoplay=a.autoplay||g.autoplay,g.animations=a.animations||g.animations,g},i=0,j=function(){document.body.addEventListener("DOMNodeRemoved",function(b){b.target===a&&o()})},k=function(b){var c=getComputedStyle(a).backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2"),d=new Image;d.onload=function(){var a=d.width,c=d.height;b(a,c)},d.src=c},l=function(b){b=b||i;var c=Math.floor(b/g.columns),d=i%g.columns,e=-g.width*d+"px "+-g.height*c+"px";return a.style.backgroundPosition=e,i},m=function(){var a=function(a){return i>=a-1?g.loop===!0?(i=0,n()):(g.complete(),f=!1):n(),i};if(void 0===g.animations)i++,l(i),a.call(this,g.totalFrames);else{if(void 0===d)for(var b in g.animations){d=g.animations[b];break}c=d[i],l(c),i++,a.call(this,d.length)}},n=function(){var a=1e3/(g.fps+1);17>a?window.requestAnimationFrame(m):e=setTimeout(m,a)},o=function(){clearTimeout(e),f=!1},p=function(){o(),n()},q=function(){i=0,n()},r=function(a){f||(a?(o(),g.animations[a]!==d&&(i=0,d=g.animations[a]),n()):n(),f=!0)},s=function(){a.jquery&&(a=a[0]),k(function(a,b){if(g.columns=Math.round(a/g.width),void 0===g.totalFrames){var c=Math.round(b/g.height);g.totalFrames=g.columns*c}g.autoplay&&(n(),f=!0)})},t=function(a){return a&&(o(),l(a)),c};return j(),h(b),s(),{stop:o,resume:p,restart:q,settings:h,play:r,frame:t}};"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:"undefined"!=typeof this&&(this.AnimateSprite=a)}(this);