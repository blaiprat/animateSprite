/*! animatesprite - v0.1.3 - 2015-05-13
* Copyright (c) 2015 Blai Pratdesaba; Licensed MIT */
!function(){"use strict";!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var a=function(a,b){var c,d,e,f={width:a.offsetWidth,height:a.offsetHeight,fps:12,complete:function(){},loop:!1,autoplay:!0,animations:void 0},g=function(a){return a=a||{},f.width=a.width||f.width,f.height=a.height||f.height,f.totalFrames=a.totalFrames||f.totalFrames,f.fps=a.fps||f.fps,f.complete=a.complete||f.complete,f.loop=a.loop||f.loop,f.autoplay=a.autoplay||f.autoplay,f.animations=a.animations||f.animations,f},h=0,i=function(){document.body.addEventListener("DOMNodeRemoved",function(b){b.target===a&&n()})},j=function(b){var c=getComputedStyle(a).backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2"),d=new Image;d.onload=function(){var a=d.width,c=d.height;b(a,c)},d.src=c},k=function(){var a=1e3/f.fps;e=setTimeout(function(){l()},a)},l=function(){var a=function(a,b){return a++,a>=b?f.loop===!0?(a=0,k()):f.complete():k(),a};if(void 0===f.animations)h=a.call(this,h,f.totalFrames);else{if(void 0===d)for(var b in f.animations){d=f.animations[b];break}c=d[h],window.requestAnimationFrame(function(){m(c),h=a.call(this,h,d.length)})}},m=function(b){b=b||h;var c=Math.floor(b/f.columns),d=h%f.columns,e=-f.width*d+"px "+-f.height*c+"px";return a.style.backgroundPosition=e,h},n=function(){clearTimeout(e)},o=function(){n(),k()},p=function(){h=0,k()},q=function(a){a?(n(),f.animations[a]!==d&&(h=0,d=f.animations[a]),k()):k()},r=function(){a.jquery&&(a=a[0]),j(function(a,b){if(f.columns=Math.round(a/f.width),!f.totalFrames){var c=Math.round(b/f.height);f.totalFrames=f.columns*c}f.autoplay&&k()})},s=function(a){return a&&(n(),m(a)),c};return i(),g(b),r(),{stop:n,resume:o,restart:p,settings:g,play:q,frame:s}};"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:"undefined"!=typeof this&&(this.AnimateSprite=a)}(this);